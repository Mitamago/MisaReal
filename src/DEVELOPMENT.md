# ローカル開発サーバー運用ガイド

## サーバーの起動

### 初回セットアップ
```bash
# プロジェクトディレクトリに移動
cd src

# 依存関係をインストール
npm install

# Vercel CLIをインストール（まだの場合）
npm install -g vercel
```

### 開発サーバーの起動
```bash
# 方法1: npmスクリプトを使用
npm run dev

# 方法2: Vercel CLIを直接使用
vercel dev
```

### アクセス方法
- ブラウザで `http://localhost:3000` にアクセス
- 自動的にブラウザが開く場合もあります

## サーバーの再起動

### 通常の再起動
```bash
# Ctrl+C でサーバーを停止
# 再度起動
npm run dev
```

### 強制再起動（問題がある場合）
```bash
# プロセスを強制終了
pkill -f "vercel dev"

# ポートをクリア（必要に応じて）
lsof -ti:3000 | xargs kill -9

# 再起動
npm run dev
```

## 開発時の注意事項

### データの永続化
- ローカル環境では投稿データはメモリに保存されます
- サーバーを再起動すると投稿データは失われます
- 本番環境では各API呼び出し間でデータが保持されます

### ホットリロード
- HTMLファイルを変更すると自動的にブラウザが更新されます
- APIファイルを変更すると自動的に再読み込みされます
- ブラウザのキャッシュをクリアする必要は通常ありません

### デバッグ方法
1. **ブラウザの開発者ツール**
   - F12キーで開く
   - Consoleタブでエラーメッセージを確認
   - NetworkタブでAPI呼び出しを監視

2. **ターミナルの出力**
   - API呼び出しのログが表示されます
   - エラーが発生した場合は詳細が表示されます

## よくある問題と解決方法

### ポート3000が使用中
```bash
# 使用中のプロセスを確認
lsof -i :3000

# プロセスを終了
kill -9 <PID>
```

### 依存関係のエラー
```bash
# node_modulesを削除して再インストール
rm -rf node_modules package-lock.json
npm install
```

### Vercel CLIのエラー
```bash
# Vercel CLIを再インストール
npm uninstall -g vercel
npm install -g vercel

# ログイン状態を確認
vercel whoami
```

## 開発フロー

### 日常の開発作業
1. サーバーを起動: `npm run dev`
2. ブラウザで `http://localhost:3000` を開く
3. コードを編集
4. ブラウザで動作確認
5. 必要に応じてサーバーを再起動

### 変更のテスト
1. 機能を追加・修正
2. ブラウザで動作確認
3. 複数のブラウザでテスト（Chrome、Firefox、Safari）
4. モバイル表示も確認（開発者ツールのデバイスモード）

### デプロイ前の確認
1. ローカルで全ての機能が動作することを確認
2. エラーがコンソールに表示されていないことを確認
3. 投稿の作成・表示・更新が正常に動作することを確認
4. ログイン・ログアウトが正常に動作することを確認

## パフォーマンス監視

### ローカル環境での監視
- ブラウザの開発者ツールのPerformanceタブを使用
- NetworkタブでAPI呼び出しの時間を確認
- Consoleタブでエラーや警告を確認

### メモリ使用量の確認
```bash
# Node.jsプロセスのメモリ使用量を確認
ps aux | grep node
```

## バックアップと復元

### コードのバックアップ
```bash
# Gitでコミット
git add .
git commit -m "開発中の変更を保存"
git push
```

### 設定ファイルのバックアップ
- `package.json`
- `vercel.json`
- カスタム設定ファイル

## トラブルシューティング

### サーバーが起動しない
1. Node.jsのバージョンを確認: `node --version`
2. ポート3000が空いているか確認
3. 依存関係が正しくインストールされているか確認

### APIが動作しない
1. `api/`ディレクトリにファイルが存在するか確認
2. `vercel.json`の設定を確認
3. ブラウザの開発者ツールでエラーを確認

### ブラウザで表示されない
1. URLが正しいか確認: `http://localhost:3000`
2. ファイアウォールの設定を確認
3. プロキシ設定を確認
